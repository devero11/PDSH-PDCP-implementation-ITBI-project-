<h2 id="documentație-proiect">Documentație Proiect</h2>
<h2 id="descrierea-problemei">1. Descrierea Problemei</h2>
<h3 id="de-ce-este-necesar">De ce este necesar?</h3>
<ul>
<li>Operarea simultană și în masă a <strong>mai multor
sisteme/noduri</strong> (management de cluster).</li>
<li><strong>Exemplu de caz de utilizare:</strong>
<ul>
<li>Servicii de servere (ex: Amazon EC2).</li>
<li>Configurarea multiplă de sisteme într-un mediu de birou.</li>
</ul></li>
</ul>
<h3 id="soluții-posibile">Soluții Posibile</h3>
<p>Reimplementarea utilitatilor standard pentru execuția paralelă de
comenzi și transferul de fișiere: * <strong><code>pdsh</code></strong>:
Rularea de comenzi în paralel. * <strong><code>pdcp</code></strong>:
Încărcarea (upload) de fișiere în paralel. *
<strong><code>rpdcp</code></strong>: Descărcarea (download) de fișiere
în paralel.</p>
<hr />
<h2 id="specificația-soluției">2. Specificația Soluției</h2>
<h3 id="obiective">Obiective</h3>
<ul>
<li><strong>Deployment ușor</strong> al nodurilor de Mașini Virtuale
(VM-uri).</li>
<li><strong>Reimplementarea</strong> funcționalităților cheie ale
comenzilor <code>pdsh/pdcp/rpdcp</code>.</li>
</ul>
<h3 id="mediu-de-rulare">Mediu de Rulare</h3>
<ul>
<li>Soluția rulează în <strong>terminal</strong>.</li>
</ul>
<h3 id="cerințe-tehnice">Cerințe Tehnice</h3>
<ul>
<li>Sistem de operare: <strong>Linux</strong>.</li>
<li>Shell: <strong>Bash</strong>.</li>
<li>Limbaj de programare: <strong>Python</strong>.</li>
<li>Protocol: <strong>SSH/SCP</strong> (pentru conectare
securizată).</li>
<li>Virtualizare: <strong>KVM</strong> și <strong>QEMU</strong>.</li>
</ul>
<h3 id="limitări">Limitări</h3>
<ul>
<li>Configurarea nodurilor <strong>nu</strong> adaugă automat
<code>hostname</code>-uri în fișierul <code>/etc/hosts</code>.</li>
<li>Sistemul de <em>logging</em> (monitorizare) este <strong>probabil
limitat</strong>.</li>
</ul>
<h3 id="plan-de-evaluare">Plan de Evaluare</h3>
<ul>
<li>Dezvoltarea unui <strong>script de teste</strong> bazat pe cazuri de
utilizare (use case-uri).</li>
</ul>
<hr />
<h2 id="design">3. Design</h2>
<h3 id="explicații-de-design">Explicații de Design</h3>
<p><br></p>
<figure>
<img src="./diagram.png" alt="Diagram" />
<figcaption aria-hidden="true">Diagram</figcaption>
</figure>
<p><br></p>
<ul>
<li><strong>Rețeaua Bridge și DHCP</strong>: Se folosește un
<code>bridge network</code> cu un <strong>server DHCP</strong> pentru a
asigura un <strong>IP static și unic</strong> pentru fiecare VM în mod
automat.
<ul>
<li><em>Motivație</em>: Fără un IP unic și cunoscut, VM-urile nu pot fi
accesate.</li>
</ul></li>
<li><strong>Alegerea Metodei</strong>: Această metodă a fost aleasă în
detrimentul <code>qemu-guest-agent</code> deoarece permite o
<strong>conectare universală</strong> atât la VM-uri, cât și la sisteme
externe, din afara specificațiilor inițiale ale proiectului.</li>
</ul>
<h3 id="descrierea-mecanismelor">Descrierea Mecanismelor</h3>
<ul>
<li><strong>DHCP Server</strong>: Rulează pe <code>bridge network</code>
pentru a forța VM-urile să obțină un <strong>IP static și unic</strong>,
făcându-le accesibile pentru <strong>USER</strong>.</li>
<li><strong>Comenzi PDSH/PDCP/RPDCP</strong>: Utilizează protocoalele
<strong>SSH/SCP</strong> pentru o conectare securizată și
<strong>paralelă</strong> la toate nodurile.
<ul>
<li><strong>Python (sau AWK)</strong> este folosit pentru
<strong>manipularea și prelucrarea argumentelor</strong> primite de
scripturile Bash.</li>
</ul></li>
</ul>
<hr />
<h2 id="implementare">4. Implementare</h2>
<h3 id="stack-tehnologic">Stack Tehnologic</h3>
<ul>
<li><strong>Python (AWK?)</strong>: Pentru manipularea șirurilor de
caractere (stringuri).</li>
<li><strong>SSH/SCP</strong>: Conectare securizată la noduri.</li>
<li><strong>QEMU</strong>: Interfață pentru rularea VM-urilor folosind
<strong>KVM</strong>.</li>
<li><strong>Alpine Linux</strong>: Distribuție <em>lightweight</em>
aleasă pentru VM-uri.</li>
<li><strong>Git/GitHub</strong>: Pentru controlul versiunilor
(<em>version control</em>).</li>
</ul>
<h3 id="probleme-apărute-soluții">Probleme Apărute &amp; Soluții</h3>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Problemă</th>
<th style="text-align: left;">Soluție</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Atribuirea IP-urilor unice pentru
VM-uri</td>
<td style="text-align: left;">Obținerea unui IP static (Soluție:
<code>got good</code>)</td>
</tr>
<tr class="even">
<td style="text-align: left;">Serverul DHCP blocat de firewall</td>
<td style="text-align: left;">Adăugarea unei excepții în firewall pentru
serviciul DHCP</td>
</tr>
</tbody>
</table>
<hr />
<h1 id="mod-de-folosire">MOD DE FOLOSIRE</h1>
<p>!!! Funcționalitate limitată, work in progress !!!</p>
<h1 id="setup">Setup</h1>
<h2 id="copyvm"><code>copyVM</code></h2>
<p><br></p>
<p>Scriptul <code>./copyVM</code> creează un număr specificat de copii
ale unei imagini VM date. Clonele sunt indexate de la <code>1</code> la
<code>n</code>. În cazul în care scriptul este rulat de mai multe ori,
indexul continuă de la ultimul clone creat.</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">./copyVM</span> <span class="at">-i</span> <span class="pp">[</span><span class="ss">path/to/image</span><span class="pp">]</span> <span class="at">-n</span> <span class="pp">[</span><span class="ss">numberOfClones</span><span class="pp">]</span> </span></code></pre></div>
<p><br></p>
<p><code>-i</code> : locația imaginii VM <code>-n</code> : numărul de
clone</p>
<p><br></p>
<h2 id="startvms"><code>startVMs</code></h2>
<p>Scriptul <code>./startVMs</code> pornește toate VM-urile dintr-un
director specificat. De asemenea, permite configurarea unui
<code>bridge network</code> și a unor <code>tap-uri</code> pentru
fiecare nod VM.</p>
<p>!!! Important</p>
<p>Pentru a te asigura că fiecare nod VM primește automat un
<code>ip static</code>, trebuie să ai un <code>server dhcp</code> care
rulează pe <code>bridge network</code>. Scriptul nu include mapări în
<code>/etc/hosts</code> pentru fiecare nod (nu este planificat momentan,
sorry :3). <code>Bridge network-ul</code> nu este persistent.</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">./startVMs</span> <span class="at">-d</span> <span class="pp">[</span><span class="ss">directory</span><span class="pp">]</span> <span class="at">-ns</span> <span class="at">-b</span> <span class="pp">[</span><span class="ss">bridgeName</span><span class="pp">]</span></span></code></pre></div>
<p><br></p>
<p><code>-d</code> : locația nodurilor <code>-ns</code> : setup pentru
bridge network (dacă este omis, va fi necesar setup manual pentru
fiecare nod) <code>-b</code> : numele pentru bridge network (dacă este
omis, valoarea implicită este <code>megatron</code>)</p>
<p><br></p>
